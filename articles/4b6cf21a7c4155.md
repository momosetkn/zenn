---
title: "Javaç³»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒRubyã§ã¤ã¾ã¥ã„ãŸã“ã¨"
emoji: "ğŸ¤”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ruby", "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª"]
published: true
---

# `&.`ã¨æ›¸ãoptional chainingçš„ãªã‚‚ã®ã®æŒ™å‹•ãŒå¤‰

## å¾Œç¶šå‡¦ç†ã®é•ã„

TypeScriptã‚„Kotlinã§ã¯ã€`?.`ã§ã™ãŒã€ãã‚Œã¨åŒã˜ã¨æ€ã£ã¦ã„ãŸã‚‰ã€é•ã„ã¾ã—ãŸã€‚

```typescript
let a: { s: string } | null = {s: "hello world"}
a?.s.length // 11
a = null
a?.s.length // undefined
```

TypeScriptã§ã¯ã“ã†ã§ã™ãŒã€ã“ã‚Œã¨åŒã˜ãƒãƒªã§Rubyã§æ›¸ã„ãŸã‚‰â€¦

```ruby
require 'ostruct'
a = OpenStruct.new(s: "hello world")
a&.s.length # 11
a = nil
a&.s.length # undefined method `length' for nil:NilClass (NoMethodError)
```

ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸâ€¦ã€‚

```ruby
a&.s&.length # 11
```

Rubyã§ã¯ã“ã†æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ã§ã™ã€‚

```scala
case class A(s: String)
var a: Option[A] = Some(A("hello world"))
// a.map(x => x.s.length)ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚·ãƒ¥ã‚¬ãƒ¼ã§ã™
a.map(_.s.length) // Option[Int] = Some(11)
a = None
a.map(_.s.length) // Option[Int] = None
```

Scalaã§åŒæ§˜ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã“ã†ã§ã™ã€‚å€¤ãŒã‚ã£ãŸå ´åˆã®ã¿å‡¦ç†ã•ã‚Œã‚‹ã®ã§ã€ãã®ã‚ãŸã‚ŠãŒTypeScriptã¨ä½¿ã†è„³ãŒä¸€ç·’ã§ã™ã­ã€‚

## é…åˆ—ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¤‰

```ruby
arr = [1,2,3]
arr&.[2] # syntax error, unexpected '[' (SyntaxError)       
arr&.[](2) # 3
```

Rubyã§Optional Chainingã—ã¦ã€æ·»å­—ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€ã¨ãªã‚‹ã¨ãªã£ãŸé€”ç«¯ã«æ›¸ãæ–¹ãŒå¤‰ã‚ã‚‹â€¦ã€‚

```typescript
const arr = [1,2,3]
arr?.[2]
```

TypeScriptã§ã¯ã€æ·»å­—ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å ´åˆã§ã‚‚å¤‰ã‚ã‚‰ãªã„ã€‚

# :ã‚³ãƒ­ãƒ³ãŒå‰ãªã®ã‹å¾Œã‚ãªã®ã‹ãƒ«ãƒ¼ãƒ«ãŒè¦šãˆã‚‰ã‚Œãªã„

```ruby
irb(main):001:0> {"key": 1}
=> {:key=>1}
irb(main):002:0> {key: 1}
=> {:key=>1}
irb(main):003:0> {:key => 1}
=> {:key=>1}
irb(main):004:0> {"key" => 1}
=> {"key"=>1}
irb(main):005:0> {:"key" => 1}
=> {:key=>1}
```
ãƒãƒƒã‚·ãƒ¥ã¯ã“ã†ã ã—

ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã‚‚
```ruby
def method1(aaa:)
```
ã¨ãªã‚‹ã—â€¦

ã“ã‚Œã¯ãªã‹ãªã‹è¦šãˆã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸ

# injectã¨ã‚‚æ›¸ã‘ã¦ã€reduceã¨ã‚‚ã‹ã‘ã‚‹

è„³ã«å®šç€ã›ãšã€å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä¸ŠãŒã‚‹ã‚ˆã†ãªâ€¦

# raise~rescue,ã¨throw~catchã®é•ã„

[raise~rescue,ã¨throw~catchã®é•ã„ã€æœ¬å½“ã«ã‚ã‹ã£ã¦ã‚‹ï¼Ÿã¾ã¨ã‚ãŸ \- Qiita](https://qiita.com/harvath/items/e716179538bc1da30f88)
Javaã®æ–‡è„ˆã§throwã¨è¨€ã£ãŸã‚‰ã€èª¤è§£ã•ã‚Œã¾ã—ãŸã®ã§ã€Rubyã§ã®é–‹ç™ºã‚’ã™ã‚‹å ´åˆã¯ã€throwã¨raiseã®é•ã„ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚

# aliasã¯ã€alias_methodã®é•ã„ãªã©

```ruby
  # ã‚«ãƒ³ãƒãŒè¦ã‚‰ãªã„ã€‚ã‚«ãƒ³ãƒã¤ã‘ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªãã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚‰ã—ã„ã€‚
  alias rename_method1 method1
  # ã‚·ãƒ³ãƒœãƒ«ã«ã—ã¦ã‚‚ã„ã„ã¿ãŸã„
  alias :rename_method1 :method1
  # alias :rename_method1, :method1 # error

  # alias_methodã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã®ãŸã‚ã‚«ãƒ³ãƒã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã¸ã®å¼•æ•°ãªã®ã§ã€:ã‚’ã¤ã‘ã¦ã‚·ãƒ³ãƒœãƒ«ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
  # IntelliJã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã¯ã€æ˜ã‚‹ã„ã»ã†ã®ã‚ªãƒ¬ãƒ³ã‚¸ã«ã—ã¦ãã‚Œã‚‹ã¿ãŸã„ã€‚
  alias_method :rename_method2, :method2
  # alias_method rename_method2, method2 # error
  # alias_method :rename_method2 :method2 # error

  # Rubyæ¨™æº–ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªãƒ¡ã‚½ãƒƒãƒ‰ã˜ã‚ƒãªã„ã‚‚ã®ã¯ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã«ãªã‚‰ãªã„ã£ã½ã„ï¼Ÿ
  attr_reader2 :variable1, :variable2, :variable3
```

![Screenshot from 2023-08-15 17-06-55.png](/images/4b6cf21a7c4155_code1.png)
IntelliJã§ã®è¦‹ãˆæ–¹

# lambdaã¨procã¨blockã®é•ã„ãŒé›£ã—ã„

[Rubyã® ãƒ–ãƒ­ãƒƒã‚¯ã€Proc\.newã€lambdaã®é•ã„ \- Qiita](https://qiita.com/ryo-ma/items/24c46592b45775e8644d)

# static privateãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ›¸ãã®ã«ã‚¯ã‚»ãŒã‚ã‚‹

[Rubyã§privateãªã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹ã«ã¯ \- ESM ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«äº‹æ¥­éƒ¨ é–‹ç™ºè€…ãƒ–ãƒ­ã‚°](https://blog.agile.esm.co.jp/entry/2016/09/30/171444)

# æ­£ã—ãrequireã§ãã¦ã„ã‚‹ã‹ã‚’çŸ¥ã‚‹è¡“ãŒç„¡ã„

IDEã§ã‚ªãƒ¼ãƒˆã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œãªã„ï¼ˆã•ã‚Œã‚‹è¨­å®šãŒã‚ã‚‹ãªã‚‰æ•™ãˆã¦ã»ã—ã„ï¼‰ã®ã§ã€è‡ªåˆ†ã§æ›¸ãå¿…è¦ãŒã‚ã‚‹ã€‚
Zeitwerkãªã©ã‚’ä½¿ã£ã¦ã„ã¦ã€requireã‚’æ›¸ãå¿…è¦ã‚’ç„¡ãã™ã€ã¨ã„ã†ã®ãŒè§£æ±ºç­–ãªã‚“ã§ã—ã‚‡ã†ã­â€¦ãã£ã¨ã€‚

# ãƒ©ãƒ ãƒ€ã®è¨˜æ³•ãŒç‹¬ç‰¹

```ruby
->(e) { }
```
ãƒ©ãƒ ãƒ€ã®->ãªãœãã“ã«ã¤ã‘ãŸã€‚

# ===ã¨ã„ã†è¨˜å·ã¯å·¦å³å¯¾ç§°ãªã®ã«ã€å®Ÿè¡ŒçµæœãŒã€Œå·¦å³å¯¾ç§°ã€ã˜ã‚ƒãªã„

[Rubyã®===æ¼”ç®—å­ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ãŸï½œTechRacho by BPSæ ªå¼ä¼šç¤¾](https://techracho.bpsinc.jp/hachi8833/2017_01_19/32941)

# mapã®ãªã‹ã§returnã‚’æ›¸ã„ã¦ã—ã¾ã†ã¨æ„å›³ã—ãªã„æŒ™å‹•ã«ãªã‚‹

ã“ã®ã‚ãŸã‚ŠãŒãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ–ãƒ­ãƒƒã‚¯ã®é•ã„ã®ã‚ˆã†ã§ã™ã€‚
è§£æ±ºæ³•ã¯ã€ä»¥ä¸‹ã«è¨˜è¼‰ãŒã‚ã‚‹
[ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¨å¦¥å”ã‚’ç¹°ã‚Šè¿”ã—ã¦å›ã ã‘ã®\.rubocop\.ymlã‚’ä½œã‚ã† \- ARMERIA](https://betrue12.hateblo.jp/entry/2015/04/18/013030)

# ãƒ–ãƒ­ãƒƒã‚¯å†…ã®nextã¯ã€æ¬¡ã®å‡¦ç†ã¸é€²ã‚€ã¨ã„ã†æ„å‘³ã¨æ€ã„ãã‚„ã€ãã†ã§ã‚‚ãªã„ã¨ããŒã‚ã‚‹

```ruby
def block_example
  yield
  puts "after block"
end

block_example do
  puts "hello world"
  next
  puts "not executed"
end
```

ä¾‹ã¨ã—ã¦ã€ã“ã†ã„ã£ãŸã‚‚ã®ã§ã™ã€‚
å®Ÿè¡Œçµæœã¯ã€
hello world
after block
ã¨ãªã‚Šã¾ã™ã€‚
nextã¨ã¯ã„ã£ãŸã„â€¦ã€‚

# unlessä½¿ã„ã“ãªã›ãªã„

`if !(hogehoge)`ã˜ã‚ƒãƒ€ãƒ¡ãªã®ã‹ãªâ€¦ã€‚ã„ã¤ã‚‚è¦‹æ…£ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¨é•ã†ã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã—ã¾ã„ã€èª­ã‚€ã®ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚

# ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ

privateãŒã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®éšå±¤ãŒåŒã˜ãƒ¬ãƒ™ãƒ«ã«ã‚ã‚‹ã®ã§åˆ†ã‹ã‚Šã¥ã‚‰ã„ã€‚
moduleã§éšå±¤ãŒæ·±ããªã£ã¦ã—ã¾ã†ã€‚

# numerable#each_with_objectã¨Enumerable#reduceã®å¼•æ•°ã®ä½ç½®ãŒé•ã†

https://docs.ruby-lang.org/ja/latest/method/Enumerable/i/reduce.html
https://docs.ruby-lang.org/ja/latest/method/Enumerable/i/each_with_object.html

# ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã€æ¸¡ã—ãŸã‚Šå–å¾—ã™ã‚‹å ´åˆã€&ã§æ¸¡ã™

```ruby
def call_block(&block)
  block.call
end

call_block { puts "Hello, block!" }
```

C++ã®å‚ç…§æ¸¡ã—ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒã€ãã†ã§ã¯ãªã„ã€‚

# @ï¼‘å€‹ã§ã‚‚ä½¿ã„æ–¹æ¬¡ç¬¬ã§ã€ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ãŒå¤‰ã‚ã‚‹

```ruby
class A
  @value = 1
  def self.static_value
    @value
  end
  def self.static_set_value(v)
    @value = v
  end
  def value
    @value
  end
  def set_value(v)
    @value = v
  end
end

a0 = A.new

A.static_set_value(5)
a0.set_value(6)

puts "A.static_value"
puts A.static_value # 5

puts "a0.value"
puts a0.value # 6
```

staticãƒ¡ã‚½ãƒƒãƒ‰ã‹ãã†ã˜ã‚ƒãªã„ã‹ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‹ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‹ãŒå¤‰ã‚ã‚‹â€¦

# å¼•æ•°ã«&blockã¨æ›¸ã„ã¦ã„ãªã„å ´åˆã§ã‚‚ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’å¼•æ•°ã«å–ã‚Œã‚‹

```ruby
def my_method
  yield("hello", 1)
  yield("world", 2)
end

my_method do |message, number|
  puts "#{message}, #{number}"
end
```

å¼•æ•°ã«&blockã¨æ›¸ã„ã¦ã„ãªã„ã‹ã‚‰ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£ãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„ã€‚
blockã‚’å—ã‘å–ã£ã¦å‡¦ç†ã§ãã‚‹ã¨ã„ã†ã“ã¨ãŒå®Ÿè£…ã‚’è¦‹ãªã„ã¨åˆ†ã‹ã‚‰ãªã„ã€‚

# Rubyã®privateãƒ¡ã‚½ãƒƒãƒ‰ã€protectedãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ™å‹•ãŒJavaã¨ã¯é•ã†

[Javaã‚„C\#ã®å¸¸è­˜ãŒé€šç”¨ã—ãªã„Rubyã®privateãƒ¡ã‚½ãƒƒãƒ‰ \- give IT a try](https://blog.jnito.com/entry/20120315/1331754912)

# doã‚’ã¤ã‘ã‚‹ã®ã‹ã¤ã‘ãªã„ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„

```ruby
class A do
  def method1 do
    puts("hello world")
  end
end
```

ã¨æ›¸ã„ã¦ã—ã¾ã†â€¦

# ãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜å·ãŒï¼“ã¤ã‚‚ã‚ã‚‹

```ruby
<<
<<-
<<~
```
ã®ï¼“ç¨®é¡ã‚‚ã‚ã‚‹â€¦

# ifå¼ãŒã‚ã‚‹ã®ã«ã€ï¼“é …æ¼”ç®—å­ã‚‚ã‚ã‚‹

Kotlinã‚„Scalaã«ã¯ã€ï¼“é …æ¼”ç®—å­ãŒç„¡ã„ä»£ã‚ã‚Šã«ã€ifãŒå¼ã¨ãªã£ã¦ã„ã¾ã™ã€‚ifå¼ã§ã„ã„ã‚“ã˜ã‚ƒâ€¦ã¨ã„ã†æ°—æŒã¡ã«ãªã‚Šã¾ã™ã€‚

# includeã¨extendã¯ä½¿ã„åˆ†ã‘ã‚‹

[ã€Rubyã€‘includeã¨extendã®é•ã„ã€‚ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã®é•ã„ã¨å®Ÿä¾‹ã€‚ \- Qiita](https://qiita.com/shizen-shin/items/ec721865bdaad4a90ef5)
Scalaã®traitã‚’ä½¿ã†ã¨ãã¿ãŸã„ã«ã€å…¨éƒ¨extendã—ã¦ã¾ã—ãŸâ€¦ã€‚ä½¿ã„åˆ†ã‘ã¾ã™ã€‚

# æœ«å°¾ã«nilã‚’ç½®ã„ã¦ãŠãã¨ã€Style/GuardClauseã§æ€’ã‚‰ã‚Œã‚‹ã®ã‚’å›é¿ã§ãã‚‹

```ruby
def method1
  if @variable1.nil?
    raise "error1"
  end

  if @variable2.nil?
    raise "error2"
  end

  if @variable3.nil?
    raise "error3"
  end

  # ä»¥ä¸‹ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ã•ã‚Œã‚‹ã®ã‚’é˜²ã’ã‚‹
  # unless @variable3.nil?
  #   return
  # end
  # 
  # "error3"
  nil
end
```

# Array#concatã¯ç ´å£Šçš„ã«é€£çµ

https://docs.ruby-lang.org/ja/latest/method/Array/i/concat.html
é…åˆ— other ã‚’è‡ªèº«ã®æœ«å°¾ã« ç ´å£Šçš„ ã«é€£çµã—ã¾ã™ã€‚
ãªã‚“ã ã£ã¦ãƒ¼ï¼Ÿï¼(Javaã®Stringè„³ã€JavaScriptã®Array/Stringè„³)

# GUIãƒ‡ãƒãƒƒã‚°ãŒæ¨™æº–ã§ã¯ã§ããªã„

debaseãªã©ã®Gemã‚’è¿½åŠ ã§å…¥ã‚Œãªã„ã¨ã„ã‘ãªãã€GUIãƒ‡ãƒãƒƒã‚°æ´¾ã®äººã¯ã€ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã®ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰å…¥ã‚‰ãªã„ã¨ã„ã‘ãªã„ã€‚
IntellJã§ã¯ã€debaseã€VSCodeã§ã¯ã€vscode-rdbgã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã€‚
